<!doctype html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/src/styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OMSI Map Bundler</title>
  <script type="module" src="/src/main.ts" defer></script>
</head>

<body>
  <div class="app-header">
    <div class="title-container">
      <h1 class="app-title">OMSI Map Bundler</h1>
      <span class="app-version" id="app-version" title="View Changelog">v1.1.2</span>
    </div>
    <div class="header-controls">
      <div class="language-switcher">
        <button class="lang-toggle" id="lang-toggle" title="Change language">
          <svg class="current-flag" width="20" height="15" viewBox="0 0 20 15" id="current-flag-svg">
            <rect width="20" height="15" fill="#012169" />
            <path d="M0,0 L20,15 M20,0 L0,15" stroke="#FFF" stroke-width="3" />
            <path d="M0,0 L20,15 M20,0 L0,15" stroke="#C8102E" stroke-width="1.5" />
            <path d="M10,0 V15 M0,7.5 H20" stroke="#FFF" stroke-width="5" />
            <path d="M10,0 V15 M0,7.5 H20" stroke="#C8102E" stroke-width="3" />
          </svg>
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            class="chevron">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
        <div class="lang-dropdown" id="lang-dropdown">
          <button class="lang-option" data-lang="en" title="English">
            <svg width="20" height="15" viewBox="0 0 20 15">
              <rect width="20" height="15" fill="#012169" />
              <path d="M0,0 L20,15 M20,0 L0,15" stroke="#FFF" stroke-width="3" />
              <path d="M0,0 L20,15 M20,0 L0,15" stroke="#C8102E" stroke-width="1.5" />
              <path d="M10,0 V15 M0,7.5 H20" stroke="#FFF" stroke-width="5" />
              <path d="M10,0 V15 M0,7.5 H20" stroke="#C8102E" stroke-width="3" />
            </svg>
            <span>English</span>
          </button>
          <button class="lang-option" data-lang="cs" title="Čeština">
            <svg width="20" height="15" viewBox="0 0 20 15">
              <rect width="20" height="7.5" fill="#FFF" />
              <rect y="7.5" width="20" height="7.5" fill="#D7141A" />
              <path d="M0,0 L10,7.5 L0,15 Z" fill="#11457E" />
            </svg>
            <span>Čeština</span>
          </button>
          <button class="lang-option" data-lang="de" title="Deutsch">
            <svg width="20" height="15" viewBox="0 0 20 15">
              <rect width="20" height="5" fill="#000" />
              <rect y="5" width="20" height="5" fill="#D00" />
              <rect y="10" width="20" height="5" fill="#FFCE00" />
            </svg>
            <span>Deutsch</span>
          </button>
        </div>
      </div>
      <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
        <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
      </button>
      <button class="help-toggle" id="help-toggle" title="Help">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>

          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>

          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
      </button>
    </div>
  </div>

  <main class="container">
    <div class="form-section">
      <div class="form-group required">
        <label for="map-folder" data-i18n="mapFolder">Map Folder</label>
        <div class="input-group">
          <input type="text" id="map-folder" readonly placeholder="Select map folder..."
            data-i18n-placeholder="selectMapFolder">
          <button class="btn-secondary" id="select-map-folder">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
            </svg>
            <span data-i18n="browse">Browse</span>
          </button>
        </div>
      </div>

      <div class="form-group two-cols">
        <div class="form-col">
          <label for="addon-folder" data-i18n="addonFolder">Addon Folder (Optional)</label>
          <div class="input-group">
            <input type="text" id="addon-folder" readonly placeholder="Select addon folder..."
              data-i18n-placeholder="selectAddonFolder">
            <button class="btn-secondary" id="select-addon-folder">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
              </svg>
              <span data-i18n="browse">Browse</span>
            </button>
          </div>
        </div>

        <div class="form-col">
          <label for="readme-path" data-i18n="readmePath">README Path (Optional)</label>
          <div class="input-group">
            <input type="text" id="readme-path" readonly placeholder="Select README file..."
              data-i18n-placeholder="selectReadme">
            <button class="btn-secondary" id="select-readme">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
              </svg>
              <span data-i18n="browse">Browse</span>
            </button>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="output-folder" data-i18n="outputFolder">Output Folder (Optional)</label>
        <div class="input-group">
          <input type="text" id="output-folder" readonly placeholder="Select output folder..."
            data-i18n-placeholder="selectOutput">
          <button class="btn-secondary" id="select-output-folder">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
            </svg>
            <span data-i18n="browse">Browse</span>
          </button>
        </div>
      </div>

      <div class="form-group two-cols">
        <div class="form-col">
          <label for="zip-name" data-i18n="zipName">ZIP Name (Optional)</label>
          <input type="text" id="zip-name" placeholder="my-map-bundle" data-i18n-placeholder="zipNamePlaceholder">
        </div>

        <!-- <div class="form-col">
          <label data-i18n="compressionLabel">Compression</label>
          <div class="compression-selector">
            <button class="compression-toggle" id="compression-toggle" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              <span class="compression-current" id="compression-current" data-i18n="compressionBalanced">Balanced</span>
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                class="chevron">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
            <div class="compression-dropdown" id="compression-dropdown">
              <button class="compression-option" data-value="none" data-i18n="compressionNone" type="button">No
                compression</button>
              <button class="compression-option" data-value="fast" data-i18n="compressionFast"
                type="button">Fast</button>
              <button class="compression-option active" data-value="balanced" data-i18n="compressionBalanced"
                type="button">Balanced</button>
              <button class="compression-option" data-value="max" data-i18n="compressionMax" type="button">Max</button>
            </div>
          </div>
        </div> -->
      </div>

      <button class="btn-primary" id="bundle-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="21 8 21 21 3 21 3 8" />
          <rect x="1" y="3" width="22" height="5" />
          <line x1="10" y1="12" x2="14" y2="12" />
        </svg>
        <span data-i18n="createBundle">Create Bundle</span>
      </button>

      <div class="status-message" id="status-message"></div>
      <div class="progress" id="progress-container" aria-live="polite">
        <div class="progress-bar" id="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text" id="progress-text"></div>
      </div>
    </div>
  </main>

  <footer class="app-footer">
    <p>
      OmsiMapBundler © 2026 Created by <strong>Kubiczeek</strong>
      •
      <a href="https://github.com/Kubiczeek" target="_blank" rel="noopener noreferrer" class="github-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
        </svg>
        GitHub
      </a>
    </p>
  </footer>

  <!-- Info Modal -->
  <div class="modal" id="info-modal">
    <div class="modal-content">
      <button class="modal-close" id="modal-close">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
      <h2 data-i18n="aboutTitle">About OMSI Map Bundler</h2>
      <div class="modal-body">
        <p data-i18n="aboutDescription">
          This tool helps you bundle your OMSI 2 maps with all dependencies into a single ZIP file.
          It automatically detects and includes sceneryobjects, splines, textures, humans, vehicles, and trains.
        </p>
        <h3 data-i18n="howToUse">How to Use:</h3>
        <ol>
          <li data-i18n="step1">Select your map folder (located in OMSI 2/maps/)</li>
          <li data-i18n="step2">Optionally add a README file</li>
          <li data-i18n="step3">Optionally set a custom output folder and ZIP name</li>
          <li data-i18n="step4">Click "Create Bundle" and wait for the process to complete</li>
        </ol>
        <div class="modal-important">
          <h3 data-i18n="importantNote">Important:</h3>
          <ul>
            <li data-i18n="noteWarning">The bundling process may take several minutes depending on the map size.</li>
            <li data-i18n="fontsNotIncluded">Fonts are NOT included in the bundle. You need to distribute them
              separately.</li>
            <li data-i18n="vehicleFolders">Due to the complexity of vehicle files, entire vehicle parent folders are
              bundled. Be aware that this includes all files in those folders.</li>
            <li data-i18n="supportContact">If you encounter any issues, please contact me on Discord: Kubiczeek</li>
          </ul>
        </div>
        <div class="modal-disclaimer">
          <h3 data-i18n="disclaimerTitle">Disclaimer</h3>
          <p data-i18n="disclaimerText">
            This tool is provided "as is" without warranty of any kind. Always backup your files before using this tool.
            The author is not responsible for any loss of data or damages that may occur from using this software.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Changelog Modal -->
  <div class="modal" id="changelog-modal">
    <div class="modal-content">
      <button class="modal-close" id="changelog-close">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
      <h2 data-i18n="changelogTitle">Changelog</h2>
      <div class="modal-body">
        <div class="changelog-entry">
          <h3>v1.1.2</h3>
          <ul>
            <li data-i18n="changelog_v1_1_2_item1">Fixed: Robust file encoding support - files with Windows-1252, ISO-8859-1, and other encodings are now properly handled</li>
            <li data-i18n="changelog_v1_1_2_item2">Fixed: "stream did not contain valid UTF-8" error that occurred with older OMSI maps</li>
            <li data-i18n="changelog_v1_1_2_item3">Enhanced: Improved compatibility with legacy map files and special characters</li>
          </ul>
        </div>
        <div class="changelog-entry">
          <h3>v1.1.1</h3>
          <ul>
            <li data-i18n="changelog_v1_1_1_item4">New Feature: Added support for including an Addon folder</li>
            <li data-i18n="changelog_v1_1_1_item1">Fixed: Complete map folder copy (including global.cfg)</li>
            <li data-i18n="changelog_v1_1_1_item2">Fixed: Spline texture extraction with folder paths</li>
            <li data-i18n="changelog_v1_1_1_item3">Fixed: Parsing of .sco files with inline comments</li>
          </ul>
        </div>
        <div class="changelog-entry">
          <h3>v1.1.0</h3>
          <ul>
            <li data-i18n="changelog_v1_1_0_item1">Major rewrite of the extraction system: The core logic has been
              rebuilt to be much more thorough and reliable.</li>
            <li data-i18n="changelog_v1_1_0_item2">Enhanced compatibility: Better support for complex objects, binary
              meshes, and various file encodings.</li>
            <li data-i18n="changelog_v1_1_0_item3">Bug fixes: Resolved critical issues with case-sensitivity and missing
              dependencies.</li>
            <li data-i18n="changelog_v1_1_0_item4">Performance: Added multithreading to dependency extraction for faster
              processing.</li>
          </ul>
        </div>
        <div class="changelog-entry">
          <h3>v1.0.1</h3>
          <ul>
            <li data-i18n="changelog_v1_0_1_item1">Fixed: Detection of [splineAttachment] and [spline_h] formats</li>
            <li data-i18n="changelog_v1_0_1_item2">Fixed: Texture loading from global.cfg (second texture was not always
              loaded)</li>
            <li data-i18n="changelog_v1_0_1_item3">Added: Debug logging options for developers</li>
          </ul>
        </div>
        <div class="changelog-entry">
          <h3>v1.0.0</h3>
          <ul>
            <li data-i18n="changelog_v1_0_0_item1">Initial release of OMSI Map Bundler</li>
            <li data-i18n="changelog_v1_0_0_item2">Automatic dependency detection (Sceneryobjects, Splines, Textures)
            </li>
            <li data-i18n="changelog_v1_0_0_item3">Vehicle and Train dependency support</li>
            <li data-i18n="changelog_v1_0_0_item4">Multi-threaded compression for faster bundling</li>
            <li data-i18n="changelog_v1_0_0_item5">Modern and user-friendly interface</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>

</html>